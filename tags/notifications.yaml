- name: Transaction Notifications
  description: |
    Our webhooks provide real-time notifications for completed transaction and token events. You can configure webhooks to receive notifications for specific events, such as when a sale transaction is completed or a token is created. Each event type is separate, so you can choose to subscribe to only the events you want to receive notifications for. See the individual endpoint documentation for more details about when each event is triggered.

    Each event is sent as a `POST` request to the URL you specify in your webhook configuration, and events can all be sent to the same URL or to different URLs (per event type). The request body will contain a JSON payload with the details of the event.

    Our system will attempt to deliver event notifications to your configured destination multiple times. When a notification request fails to deliver, the system will retry failed requests with an exponential backoff strategy. If the request continues to fail after multiple attempts, the event will be marked as failed and will not be retried again.

    You can subscribe to receive notifications for the following transaction events:
    - [`sale.completed`](#operation-post-SaleCompleted)
    - [`auth.completed`](#operation-post-AuthCompleted)
    - [`capture.completed`](#operation-post-CaptureCompleted)
    - [`refund.completed`](#operation-post-RefundCompleted)

    See the [Token Notifications](#webhook-token-notifications) section for available token notifications.

    ### Webhook Configuration

    Before configuring webhooks, a shared secret value must be exchanged. This shared secret value is used to calculate the SHA-256 checksum to validate the authenticity of the webhook request. The shared secret value is a random string that is generated by us and securely shared with you. This secret value must be kept confidential and should not be shared with anyone else.

    The header request sent to your configured webhook URL will contain a `x-fsk-wh-chksm` header with the SHA-256 checksum of several concatenated request body fields, and the shared secret. The checksum is calculated using the following fields:

    - `event.id`
    - `event.type`
    - `event.timestamp`
    - `shared_secret` (not in the request body)

    Note that the correct order of the fields in the checksum calculation is important.

    #### Example

    Given the following webhook request body:
    ```json
    {
      "event": {
        "id": "evt_01JSQ33SMQKET4DMRV46W9WY84",
        "type": "sale.completed",
        "timestamp": "2025-04-07T20:03:05Z"
      },
      ...
    }
    ```

    And using `secret_value` as the shared secret, the SHA-256 checksum would be calculated as follows:

    - Concatenate the request body fields into a single string in the following order: `event.id, event.type, event.timestamp`
      - Result:
        `evt_01JSQ33SMQKET4DMRV46W9WY84sale.completed2025-04-07T20:03:05Z`

    - Append the `shared_secret` value (`secret_value`) to the concatenated string:
      - Result:
        `evt_01JSQ33SMQKET4DMRV46W9WY84sale.completed2025-04-07T20:03:05Zsecret_value`

    - Hash the string using SHA-256, using Base64 output encoding:
      - Result:
        `OU6bkK1/nScyy8fA+3QTZj1i3xaVMmAarTEnvogFFTA=`

    The value in the `x-fsk-wh-chksm` request header must match `OU6bkK1/nScyy8fA+3QTZj1i3xaVMmAarTEnvogFFTA=`.

- name: Token Notifications
  description: |
    In addition to [transaction notifications](#webhook-transaction-notifications), you can also subscribe to receive notifications for the following token events:

    - [`token.created`](#operation-post-TokenCreated)
    - [`token.updated`](#operation-post-TokenUpdated)
    - [`token.removed`](#operation-post-TokenRemoved)

    The same rules as [transaction notifications](#topic-webhook-configuration) apply:

    - The request body will contain a JSON payload with the details of the event
    - The header request sent to your configured webhook URL will contain a `x-fsk-wh-chksm` header with the SHA-256 checksum calculated from the request body and shared secret